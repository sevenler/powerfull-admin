{"version":3,"sources":["/src/components/ImageGallery.tsx"],"names":[],"mappings":";;;;;AAAA,wDAA0B;AAC1B,kCAAiD;AACjD,0CAAyC;AACzC,0DAA4B;AAC5B,iCAA6B;AAmB7B;IAAkC,wCAGjC;IAHD;QAAA,qEAuJC;QAnJC,WAAK,GAAsB;YACzB,QAAQ,EAAE,KAAK;YACf,KAAK,EAAE,CAAC,CAAC;YACT,KAAK,EAAE,EAAE;SACV,CAAC;;IA+IJ,CAAC;IA5IC,yCAAkB,GAAlB,UAAmB,IAYlB;QACC,IAAI,CAAC,QAAQ,CAAC;YACZ,QAAQ,EAAE,IAAI;YACd,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YACrC,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC;SACvB,CAAC,CAAC;IACL,CAAC;IAGD,4BAAK,GAAL;QACE,IAAI,CAAC,QAAQ,CAAC;YACZ,QAAQ,EAAE,KAAK;SAChB,CAAC,CAAC;IACL,CAAC;IAGD,2BAAI,GAAJ;QACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC;YACZ,KAAK,EAAE,KAAK,GAAG,CAAC;SACjB,CAAC,CAAC;IACL,CAAC;IAGD,2BAAI,GAAJ;QACE,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAC/B,IAAI,CAAC,QAAQ,CAAC;YACZ,KAAK,EAAE,KAAK,GAAG,CAAC;SACjB,CAAC,CAAC;IACL,CAAC;IAGD,sCAAe,GAAf,UAAgB,CAAmC;QACjD,IAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,YAAY,CAAC,YAAY,CAAE,EAAE,EAAE,CAAC,CAAC;QACxE,IAAI,CAAC,QAAQ,CAAC;YACZ,KAAK;SACN,CAAC,CAAC;IACL,CAAC;IAED,6BAAM,GAAN;QAAA,iBAwFC;QAvFO,mBAAuC,EAAtC,sBAAQ,EAAE,kBAA4B,CAAC;QACxC,mBAA2B,EAA1B,gBAAK,EAAE,gBAAmB,CAAC;QAElC,OAAO,CACL;YACG,eAAK,CAAC,YAAY,CAAC,QAAe,EAAE;gBACnC,cAAc,EAAE,IAAI,CAAC,kBAAkB;aACxC,CAAC;YAEF,8BAAC,eAAK,IACJ,UAAU,QACV,IAAI,EAAC,MAAM,EACX,MAAM,EAAE,IAAI,CAAC,KAAK,EAClB,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EACzB,gBAAgB,EAAE,EAAE,CAAC,cAAc,CAAC;gBAEpC,qDACe,cAAI,mBACH,MAAM,EACpB,SAAS,EAAE,EAAE,CAAC,oBAAoB,CAAC,EACnC,OAAO,EAAE,IAAI,CAAC,KAAK;oBAEnB,8BAAC,YAAI,IAAC,IAAI,EAAC,OAAO,GAAG,CACnB;gBACH,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CACxB;oBACE,uCAAK,SAAS,EAAE,EAAE,CAAC,oBAAoB,CAAC,IACrC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,CACf;oBACN,uCAAK,SAAS,EAAE,EAAE,CAAC,mBAAmB,CAAC;wBACrC,uCAAK,GAAG,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,WAAW,GAAI;wBAErC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAClB;4BACE,qCACE,SAAS,EAAE,EAAE,CACX,sBAAsB,EACtB,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAChC,EACD,OAAO,EAAE,IAAI,CAAC,IAAI;gCAElB,8BAAC,YAAI,IAAC,IAAI,EAAC,MAAM,GAAG,CAClB;4BACJ,qCACE,SAAS,EAAE,EAAE,CACX,sBAAsB,EACtB,KAAK,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAC/C,EACD,OAAO,EAAE,IAAI,CAAC,IAAI;gCAElB,8BAAC,YAAI,IAAC,IAAI,EAAC,MAAM,GAAG,CAClB,CACH,CACJ,CAAC,CAAC,CAAC,IAAI,CACJ,CACL,CACJ,CAAC,CAAC,CAAC,IAAI;gBACP,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAClB,uCAAK,SAAS,EAAE,EAAE,CAAC,qBAAqB,CAAC;oBACvC,qCAAG,SAAS,EAAE,EAAE,CAAC,mCAAmC,CAAC;wBACnD,8BAAC,YAAI,IAAC,IAAI,EAAC,MAAM,GAAG,CAClB;oBACJ,uCAAK,SAAS,EAAE,EAAE,CAAC,wBAAwB,CAAC;wBAC1C,uCAAK,SAAS,EAAE,EAAE,CAAC,oBAAoB,CAAC,IACrC,KAAK,CAAC,GAAG,CAAC,UAAC,IAAI,EAAE,CAAC,IAAK,QACtB,uCACE,GAAG,EAAE,CAAC,gBACM,CAAC,EACb,OAAO,EAAE,KAAI,CAAC,eAAe,EAC7B,SAAS,EAAE,EAAE,CACX,mBAAmB,EACnB,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAC/B;4BAED,uCAAK,GAAG,EAAE,IAAI,CAAC,GAAG,GAAI,CAClB,CACP,EAZuB,CAYvB,CAAC,CACE,CACF;oBACN,qCAAG,SAAS,EAAE,EAAE,CAAC,mCAAmC,CAAC;wBACnD,8BAAC,YAAI,IAAC,IAAI,EAAC,MAAM,GAAG,CAClB,CACA,CACP,CAAC,CAAC,CAAC,IAAI,CACF,CACP,CACJ,CAAC;IACJ,CAAC;;IA3ID;QADC,iBAAQ;;;;0DAmBR;IAGD;QADC,iBAAQ;;;;6CAKR;IAGD;QADC,iBAAQ;;;;4CAMR;IAGD;QADC,iBAAQ;;;;4CAMR;IAGD;QADC,iBAAQ;;qEACU,eAAK,oBAAL,eAAK,CAAC,UAAU;;uDAKlC;IA2FH,mBAAC;CAAA,CAvJiC,eAAK,CAAC,SAAS,GAuJhD;AAvJY,oCAAY;AAyJzB,kBAAe,iBAAS,CAAC,YAAY,CAAC,CAAC","file":"ImageGallery.js","sourcesContent":["import React from 'react';\nimport {themeable, ClassNamesFn} from '../theme';\nimport {autobind} from '../utils/helper';\nimport Modal from './Modal';\nimport {Icon} from './icons';\n\nexport interface ImageGalleryProps {\n  classnames: ClassNamesFn;\n  classPrefix: string;\n  children: React.ReactNode;\n}\n\nexport interface ImageGalleryState {\n  isOpened: boolean;\n  index: number;\n  items: Array<{\n    src: string;\n    originalSrc: string;\n    title?: string;\n    caption?: string;\n  }>;\n}\n\nexport class ImageGallery extends React.Component<\n  ImageGalleryProps,\n  ImageGalleryState\n> {\n  state: ImageGalleryState = {\n    isOpened: false,\n    index: -1,\n    items: []\n  };\n\n  @autobind\n  handleImageEnlarge(info: {\n    src: string;\n    originalSrc: string;\n    list?: Array<{\n      src: string;\n      originalSrc: string;\n      title?: string;\n      caption?: string;\n    }>;\n    title?: string;\n    caption?: string;\n    index?: number;\n  }) {\n    this.setState({\n      isOpened: true,\n      items: info.list ? info.list : [info],\n      index: info.index || 0\n    });\n  }\n\n  @autobind\n  close() {\n    this.setState({\n      isOpened: false\n    });\n  }\n\n  @autobind\n  prev() {\n    const index = this.state.index;\n    this.setState({\n      index: index - 1\n    });\n  }\n\n  @autobind\n  next() {\n    const index = this.state.index;\n    this.setState({\n      index: index + 1\n    });\n  }\n\n  @autobind\n  handleItemClick(e: React.MouseEvent<HTMLDivElement>) {\n    const index = parseInt(e.currentTarget.getAttribute('data-index')!, 10);\n    this.setState({\n      index\n    });\n  }\n\n  render() {\n    const {children, classnames: cx} = this.props;\n    const {index, items} = this.state;\n\n    return (\n      <>\n        {React.cloneElement(children as any, {\n          onImageEnlarge: this.handleImageEnlarge\n        })}\n\n        <Modal\n          closeOnEsc\n          size=\"full\"\n          onHide={this.close}\n          show={this.state.isOpened}\n          contentClassName={cx('ImageGallery')}\n        >\n          <a\n            data-tooltip=\"关闭\"\n            data-position=\"left\"\n            className={cx('ImageGallery-close')}\n            onClick={this.close}\n          >\n            <Icon icon=\"close\" />\n          </a>\n          {~index && items[index] ? (\n            <>\n              <div className={cx('ImageGallery-title')}>\n                {items[index].title}\n              </div>\n              <div className={cx('ImageGallery-main')}>\n                <img src={items[index].originalSrc} />\n\n                {items.length > 1 ? (\n                  <>\n                    <a\n                      className={cx(\n                        'ImageGallery-prevBtn',\n                        index <= 0 ? 'is-disabled' : ''\n                      )}\n                      onClick={this.prev}\n                    >\n                      <Icon icon=\"prev\" />\n                    </a>\n                    <a\n                      className={cx(\n                        'ImageGallery-nextBtn',\n                        index >= items.length - 1 ? 'is-disabled' : ''\n                      )}\n                      onClick={this.next}\n                    >\n                      <Icon icon=\"next\" />\n                    </a>\n                  </>\n                ) : null}\n              </div>\n            </>\n          ) : null}\n          {items.length > 1 ? (\n            <div className={cx('ImageGallery-footer')}>\n              <a className={cx('ImageGallery-prevList is-disabled')}>\n                <Icon icon=\"prev\" />\n              </a>\n              <div className={cx('ImageGallery-itemsWrap')}>\n                <div className={cx('ImageGallery-items')}>\n                  {items.map((item, i) => (\n                    <div\n                      key={i}\n                      data-index={i}\n                      onClick={this.handleItemClick}\n                      className={cx(\n                        'ImageGallery-item',\n                        i === index ? 'is-active' : ''\n                      )}\n                    >\n                      <img src={item.src} />\n                    </div>\n                  ))}\n                </div>\n              </div>\n              <a className={cx('ImageGallery-nextList is-disabled')}>\n                <Icon icon=\"next\" />\n              </a>\n            </div>\n          ) : null}\n        </Modal>\n      </>\n    );\n  }\n}\n\nexport default themeable(ImageGallery);\n"]}