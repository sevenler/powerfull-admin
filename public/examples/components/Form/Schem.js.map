{"version":3,"sources":["/examples/components/Form/Schem.jsx"],"names":[],"mappings":"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","file":"Schem.js","sourcesContent":["import React from 'react';\nimport TitleBar from '../../../src/components/TitleBar';\nimport {render} from '../../../src/index';\n\nconst Schema = {\n  title: 'Person',\n  type: 'object',\n  properties: {\n    firstName: {\n      title: 'First Name',\n      type: 'string'\n    },\n    lastName: {\n      type: 'string'\n    },\n    age: {\n      description: 'Age in years',\n      type: 'integer',\n      minimum: 0\n    },\n    tag: {\n      type: 'array',\n      description: 'Tags',\n      default: ['IT'],\n      items: {\n        type: 'text'\n      }\n    },\n\n    clients: {\n      type: 'array',\n      description: 'Tags',\n      items: {\n        type: 'object',\n        properties: {\n          firstName: {\n            title: 'First Name',\n            type: 'string'\n          },\n          lastName: {\n            type: 'string'\n          }\n        }\n      }\n    }\n  },\n  required: ['firstName', 'lastName']\n};\n\nfunction property2control(property, key, schema) {\n  const requiredList = schema.required || [];\n  const rest = {};\n  const validations = {};\n  let type = 'text';\n\n  if (property.type === 'integer') {\n    type = 'number';\n\n    typeof property.minimum === 'number' && (rest.min = property.minimum);\n    // property.max\n  } else if (property.type === 'array') {\n    type = 'combo';\n    const items = property.items;\n\n    if (items.type === 'object') {\n      rest.controls = makeControls(items.properties, items);\n      rest.multiLine = true;\n    } else {\n      type = 'array';\n      rest.inline = true;\n      rest.items = property2control(items, 'item', property);\n    }\n  }\n\n  if (typeof property.minimum === 'number') {\n    validations.minimum = property.minimum;\n  }\n\n  return {\n    name: key,\n    type,\n    required: !!~requiredList.indexOf(key),\n    label: property.title || property.description,\n    desc: property.title && property.description,\n    value: property.default,\n    validations,\n    ...rest\n  };\n}\n\nfunction makeControls(properties, schema) {\n  const keys = Object.keys(properties);\n  return keys.map(key => property2control(properties[key], key, schema));\n}\n\nfunction JSONSchme2AMisSchema(schema) {\n  if (schema.type !== 'object') {\n    throw new Error('JSONSchme2AMisSchema 只支持 object 转换');\n  }\n\n  return {\n    title: schema.title,\n    type: 'form',\n    mode: 'horizontal',\n    controls: makeControls(schema.properties, schema)\n  };\n}\n\nconst amisFormSchema = JSONSchme2AMisSchema(Schema);\n\nexport default class JSONSchemaForm extends React.Component {\n  state = {\n    data: {}\n  };\n\n  renderForm() {\n    return render({\n      type: 'page',\n      title: '',\n      body: {\n        ...amisFormSchema,\n        onChange: values =>\n          this.setState({\n            data: {\n              ...values\n            }\n          })\n      }\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <TitleBar title=\"JSON Schema Form\" />\n        <div className=\"wrapper\">\n          <div>\n            <h3>Schema</h3>\n            <pre>\n              <code>{JSON.stringify(Schema, null, 2)}</code>\n            </pre>\n          </div>\n\n          <div>\n            <h3>Form</h3>\n            {this.renderForm()}\n          </div>\n\n          <div>\n            <h3>Data</h3>\n            <pre>\n              <code>{JSON.stringify(this.state.data, null, 2)}</code>\n            </pre>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]}